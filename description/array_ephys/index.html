<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../../img/favicon.ico">

    
    <title>Array Electrophysiology - DataJoint Elements</title>
    

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/v4-shims.css">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.min.css">
    <link href='//rsms.me/inter/inter.css' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,700italic,400,300,600,700&subset=latin-ext,latin' rel='stylesheet' type='text/css'>
    <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
    <link href="../../css/base.min.css" rel="stylesheet">
    <link href="../../css/cinder.min.css" rel="stylesheet">

    
        
        <link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/styles/github.min.css">
        
    
    <link href="../../extra.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
            <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
            <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
        <![endif]-->

    

     
</head>

<body>

    <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->

            
              <a class="navbar-brand" href="../..">DataJoint Elements</a>
            
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="../..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../publications/">Publications</a>
                    </li>
                
                
                
                    <li >
                        <a href="../../projects/">Projects</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../usage/design-principles/">Design Principles</a>
</li>

                        
                            
<li >
    <a href="../../usage/adopt/">Adopt</a>
</li>

                        
                            
<li >
    <a href="../../usage/install/">Setup</a>
</li>

                        
                            
<li >
    <a href="../../usage/glossary/">Glossary</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Element Descriptions <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../lab/">Lab</a>
</li>

                        
                            
<li >
    <a href="../animal/">Animal</a>
</li>

                        
                            
<li >
    <a href="../session/">Session</a>
</li>

                        
                            
<li >
    <a href="../event/">Event</a>
</li>

                        
                            
<li class="active">
    <a href="./">Array Electrophysiology</a>
</li>

                        
                            
<li >
    <a href="../electrode_localization/">Electrode localization</a>
</li>

                        
                            
<li >
    <a href="../calcium_imaging/">Calcium Imaging</a>
</li>

                        
                            
<li >
    <a href="../miniscope/">Miniscope</a>
</li>

                        
                            
<li >
    <a href="../deeplabcut/">DeepLabCut</a>
</li>

                        
                            
<li >
    <a href="../facemap/">Facemap</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Community <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../community/contribute/">Contribution Guidelines</a>
</li>

                        
                            
<li >
    <a href="../../community/nwb/">NWB</a>
</li>

                        
                            
<li >
    <a href="../../community/support/">Support</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Management and Policies <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../../management/plan/">Management Plan</a>
</li>

                        
                            
<li >
    <a href="../../management/team/">Team</a>
</li>

                        
                            
<li >
    <a href="../../management/governance/">Project Governance</a>
</li>

                        
                            
<li >
    <a href="../../management/selection/">Project Selection Process</a>
</li>

                        
                            
<li >
    <a href="../../management/quality-assurance/">Quality Assurance</a>
</li>

                        
                            
<li >
    <a href="../../management/outreach/">Outreach Plan</a>
</li>

                        
                            
<li >
    <a href="../../management/licenses/">Licenses and User Agreements</a>
</li>

                        
                        </ul>
                    </li>
                
                
                </ul>

            <ul class="nav navbar-nav navbar-right">
            </ul>
        </div>
    </div>
</div>

    <div class="container">
        
        
        <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="first-level active"><a href="#array-electrophysiology">Array Electrophysiology</a></li>
            <li class="second-level"><a href="#description-of-modality-user-population">Description of modality, user population</a></li>
                
            <li class="second-level"><a href="#acquisition-tools">Acquisition tools</a></li>
                
            <li class="second-level"><a href="#preprocessing-tools">Preprocessing tools</a></li>
                
            <li class="second-level"><a href="#key-projects">Key projects</a></li>
                
            <li class="second-level"><a href="#pipeline-development">Pipeline Development</a></li>
                
    </ul>
</div></div>
        <div class="col-md-9" role="main">

<h1 id="array-electrophysiology">Array Electrophysiology</h1>
<h2 id="description-of-modality-user-population">Description of modality, user population</h2>
<p>Neuropixels probes were developed by a collaboration between HHMI Janelia, industry partners, and others (Jun et al., Nature 2017). 
Since its initial release in October 2018, 300 labs have ordered 1200 probes. 
Since the rollout of Neuropixels 2.0 in October 2020, IMEC has been shipping 100+ probes monthly (correspondence with Tim Harris). </p>
<p>Neuropixels probes offer 960 electrode sites along a 10mm long shank, 
with 384 recordable channels per probe that can record hundreds of units spanning multiple brain regions 
(Neuropixels 2.0 version is a 4-shank probe with 1280 electrode sites per shank). 
Such large recording capacity have offered tremendous opportunities for the field of neurophysiology research, 
yet this is accompanied by an equally great challenge in terms of data and computation management.</p>
<h2 id="acquisition-tools">Acquisition tools</h2>
<p>The typical instrumentation used for data acquisition is the Neuropixels probe and headstage interfacing with a PXIe acquisition module (<a href="https://www.neuropixels.org/control-system">https://www.neuropixels.org/control-system</a>).
Two main acquisition softwares are used for Neuropixels:
+ SpikeGLX - developed by Bill Karsh and Tim Harris at HHMI/Janelia
+ OpenEphys - developed by Joshua Siegle at the Allen Institute.</p>
<p>These save the data into specific directory structure and file-naming convention as custom binary formats (e.g. “.bin”, “.dat”). Meta data are stored as separate files in xml or text format.</p>
<h2 id="preprocessing-tools">Preprocessing tools</h2>
<p>The preprocessing pipeline includes bandpass filtering for LFP extraction, bandpass filtering for spike sorting,  spike sorting, and manual curation of the spike sorting results, and calculation of quality control metrics. In trial-based experiments, the spike trains are aligned and separated into trials. Standard processing may include PSTH computation aligned to trial onset or other events, and often grouped by different trial types. 
Neuroscience groups have traditionally developed custom home-made toolchains. </p>
<p>In recent years, several leaders have been emerging as de facto standards with significant community uptake: 
+ Kilosort
+ JRClust
+ MountainSort
+ SpyKING CIRCUS</p>
<p>Kilosort provides most automation and has gained significant popularity, being adopted as one of the key spike sorting methods in the majority of the teams/collaborations we have worked with. As part of Year-1 U24 effort, we provide support for data ingestion of spike sorting results from Kilosort.
Further effort will be devoted for the ingestion support of other spike sorting methods. 
On this end, a framework for unifying existing spike sorting methods, 
named <a href="https://github.com/SpikeInterface/spikeinterface">SpikeInterface</a>, 
has been developed by Alessio Buccino, et al. 
SpikeInterface provides a convenient Python-based wrapper to invoke, extract, compare spike sorting results from different sorting algorithms.</p>
<h2 id="key-projects">Key projects</h2>
<p>Over the past few years, several labs have developed DataJoint-based data management and processing pipelines for Neuropixels probes. 
Our team collaborated with several of them during their projects. 
Additionally, we interviewed these teams to understand their experiment workflow, pipeline design, associated tools, and interfaces. 
These teams include:</p>
<ul>
<li>International Brain Lab - <a href="https://internationalbrainlab.org">https://internationalbrainlab.org</a> - <a href="https://github.com/int-brain-lab/IBL-pipeline">https://github.com/int-brain-lab/IBL-pipeline</a></li>
<li>Mesoscale Activity Project (HHMI Janelia) - <a href="https://github.com/mesoscale-activity-map">https://github.com/mesoscale-activity-map</a> - <a href="https://github.com/mesoscale-activity-map/map-ephys">https://github.com/mesoscale-activity-map/map-ephys</a> </li>
<li>Moser Group (private repository)</li>
<li>Andreas Tolias Lab (BCM)</li>
<li>BrainCoGs (Princeton Neuroscience Institute)</li>
<li>Brody Lab (Princeton)</li>
</ul>
<h2 id="pipeline-development">Pipeline Development</h2>
<p>Through our interviews and direct collaboration on the precursor projects,
 we identified the common motifs to create the Array Electrophysiology Element with the repository hosted at <a href="https://github.com/datajoint/element-array-ephys">https://github.com/datajoint/element-array-ephys</a>.</p>
<p>Major features of the Array Electrophysiology Element include:
+ Pipeline architecture defining:
    + Probe, electrode configuration compatible with Neuropixels probes and generalizable to other types of probes (e.g. tetrodes) - supporting both chronic and acute probe insertion mode
    + Probe-insertion, ephys-recordings, LFP extraction, clusterings, curations, sorted units and the associated data (e.g. spikes, waveforms, etc.)
    + Store/track/manage different curations of the spike sorting results
+ Ingestion support for data acquired with SpikeGLX and OpenEphys acquisition systems
+ Ingestion support for spike sorting outputs from Kilosort
+ Sample data and complete test suite for quality assurance</p>
<p>Incorporation of SpikeInterface into the Array Electrophysiology Element will be on DataJoint Elements development roadmap. 
Dr. Loren Frank has led a development effort of a DataJoint pipeline with SpikeInterface framework and NeurodataWithoutBorders format integrated (<a href="https://github.com/LorenFrankLab/nwb_datajoint">https://github.com/LorenFrankLab/nwb_datajoint</a>).</p></div>
        
        
    </div>

    
      <footer class="col-md-12 text-center">
          
<hr>
<p>
<small>&copy; DataJoint, 2022.</small>

</p>

      </footer>
    
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="../../js/bootstrap-3.0.3.min.js"></script>

    
    <script src="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.18.0/build/highlight.min.js"></script>
        
    <script>hljs.initHighlightingOnLoad();</script>
    

    <script>var base_url = "../.."</script>
    
    <script src="../../js/base.js"></script>

    <div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
    </body>

</html>
